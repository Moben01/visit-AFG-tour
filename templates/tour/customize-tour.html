{% extends 'base.html' %}
{% block content %}
{% load static %}

<section class="section about-section">
    <div class="container">
        <div class="row">
            <div class="bg-light-200 card-bg-light mb-2">
                                         
                <div class="card shadow-none mb-0">
                    <div class="card-body p-3">
                        <div class="stage-flow">
                           
                            <a href="" class="position-absolute top-0 end-0 p-3 text-decoration-none"
                            title="Customize your itinerary">
                            <span class="avatar avatar-lg avatar-rounded flex-shrink-0"><img src="{{ get_itienary.image.url }}" alt="Img"></span>

                        </a>
                            <div class="d-flex align-items-center flows-step">
                                <span class="flow-step">{{get_itienary.day_number}}</span>
                                <div class="flow-content">
                                    
                                    <div class="d-flex align-items-center justify-content-between mb-2">
                                        <div>
                                            <h6 class="fw-medium mb-1">Day {{get_itienary.day_number}}, {{get_itienary.title}}</h6>
                                            <!-- <p>{{get_itienary.date}}</p> -->
                                        </div>
                                        
                                    </div>
                                    <p>
                                        {{get_itienary.description}}
                                    </p>
                                    

                                    <div style="display: flex; gap: 24px; align-items: center;">
                                        <!-- Accommodation -->
                                        <div style="display: flex; align-items: center; gap: 8px;">
                                          <!-- Accommodation SVG icon -->
                                         <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 128 128"><path fill="#fadbbc" d="m3.68 43.11l17.03.21s-.07-10.03 0-10.78c.07-.74.67-.97 1.63-.97h11.52s4.21-19.72 30.67-19.58c25.08.13 29.89 19.36 29.89 19.36s11.22.15 11.96.15s1.11.59 1.11 1.41v10.26h16.78l-.8 1.93l-4.9 8.25l-109.24-.01z"/><path fill="#b99277" d="m20.6 51.7l-10.7.01s-4.53-7.4-4.93-7.98c-.53-.75-1.72-.63-2.11-.57c-.67.09-.14 1.17.61 2.25s3.94 6.43 3.94 6.43v72.02h113.22l.09-71.78s3.98-6.54 4.37-7.19s.98-1.69.26-1.73c-.78-.04-1.68-.18-2.45 1.03c-.88 1.39-4.58 7.16-4.58 7.16h-10.8V40.17h-16.6s-.59-22.84-27.15-22.68c-26.55.17-26.25 22.66-26.25 22.66H20.74c0 .01-.14 11.35-.14 11.55"/><path fill="#e2c090" d="M9.86 56.19h10.59v44.28l-10.68.1zm13.28-11.52v44.38l81.98-.09v-44.1H85.81s1.38-22.41-21.45-22.65c-23.67-.26-21.91 22.28-21.91 22.28z"/><path fill="#fadbbc" d="m42.45 44.49l-6.16.05v79.36h6.37c.01 0-.15-79.41-.21-79.41m43.36.37h6.39l-.01 79.01h-6.67s.45-79.37.29-79.01"/><path fill="#e2c090" d="M118.25 56.56h-10.32v43.9h10.22z"/><path fill="#ffa828" d="m50.22 99.45l-.03 24.75H78.2l.03-25.51z"/><path fill="#546f7a" d="M52.8 102.66v18.63h9.88v-18.57zm12.71.19h9.76l.25 18.44h-9.94z"/><path fill="#faddc3" d="M20.69 99.03c0 .31.08 26.61.23 26.84s7.43.31 7.74 0c.08-.08 0-27 0-27zm78.98.24s-.29 25.44-.08 26.07c.08.23 7.33.43 7.74.15c.23-.15.23-26.3.23-26.3z"/><path fill="#2f7c31" d="M113.79 116.93c-1.48-.06-4.56-1.43-4.25-6.26c.3-4.73 2.66-7.38 4.25-7.44s4.25 4.08 4.25 7.56c0 4.02-1.65 6.25-4.25 6.14m-99.12-13.64c-1.49.06-4.48 3.96-4.37 8.33c.12 4.61 2.6 5.67 4.19 5.79s4.37-1.83 4.25-6.08s-2.59-8.1-4.07-8.04"/><path fill="#e2c090" d="M10.96 116.64c-.16.4.06 7.23.06 7.23l6.73-.01s.11-6.99.11-7.23c.01-.23-6.82-.19-6.9.01m99.22-.3c-.06-.3 6.91-.24 6.97-.06c.13.39-.1 7.62-.1 7.62h-6.85z"/><path fill="#af0c1a" d="M19.42 91.91s.07 5.86.12 6.83s-.11 1.89 2.06 1.91c2.13.02 84.69.04 85.76.04s2.28-.61 2.38-2.14c.1-1.52.05-6.43.05-6.43l-46.36-1.6z"/><path fill="#fadbbc" d="M109.79 92.12s.05-2.2.05-2.88c0-.69-.61-1.22-2.37-1.26s-84.52-.15-86.24-.15s-1.76.9-1.84 1.74s.02 2.34.02 2.34z"/><path fill="#6c1507" d="M46.9 37.64h8.64v45.64H46.9zm26.15 0h8.64v45.64h-8.64z"/><path fill="#6c1507" d="M54.17 56.37h20v9h-20z"/><path fill="#536f79" d="M95.68 46.61h6.38v10.06h-6.38zm-.03 14.02h6.38v10.06h-6.38zm0 14.27h6.38v10.06h-6.38zM26.74 47.06h6.38v10.06h-6.38zm-.03 14.02h6.38v10.06h-6.38zm0 14.27h6.38v10.06h-6.38zm-14.8-14.19h6.38v10.06h-6.38zm0 14.26h6.38v10.06h-6.38zm98.03-14.75h6.38v10.06h-6.38zm0 14.27h6.38V85h-6.38z"/></svg>
                                          <span>{{ get_itienary.accommodation }}</span>
                                        </div>
                                      
                                        <!-- Transport -->
                                        <div style="display: flex; align-items: center; gap: 8px;">
                                          <!-- Transport SVG icon -->
                                          <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" style="width: 24px; height: 24px;">
                                            <path fill="currentColor" d="M15.97 13.83A5.9 5.9 0 0 0 13.82 16l-2.27-4.37l-3.89 3.87L8 18l-1.05 1.06l-1.77-3.19L2 14.11l1.06-1.06l2.48.35l3.89-3.9L2 5.62l1.41-1.41l9.2 2.12l3.89-3.89a1.49 1.49 0 0 1 2.12 0c.58.59.58 1.56 0 2.12l-3.89 3.89zm5.37 2.01l-3.59 3.59l-1.59-1.59L15 19l2.75 3l4.75-4.75z"/>
                                          </svg>
                                          <span>{{ get_itienary.transport }}</span>
                                        </div>
                                      </div>                                          
                                </div>
                            </div>
                         
                        </div>
                    </div>
                    
                </div>
            </div>

                <div class="about-image mb-4 mb-lg-0">
                    
                    <div class="container mt-0 p-0">
                        <div class="row justify-content-center">
                            <div class="col-md-10">
                                <div class="card shadow-lg border-0 rounded-3">
                                    <div class="card-header bg-primary text-white text-center py-3">
                                        <h5 class="mb-0">Edit Itinerary</h5>
                                    </div>
                                    <div class="card-body">
                    
                                            <div class="place-slider owl-carousel owl-loaded owl-drag">
                                                <form method="post" action="{% url 'tour:edit_itinerary' itienary_id=get_itienary.id user_id=user.id %}">
                                                    {% csrf_token %}
                                                    <h6 class="mb-4">Accommodations</h6>
                                                    <div class="owl-stage-outer">
                                                        <div class="owl-stage"
                                                            style="transform: translate3d(-330px, 0px, 0px); transition: 2s; width: 1650px;">
                                                            {% for acc in accommodation %}
                                                            <div class="owl-item" style="width: 220px; margin-right: 16px;">
                                                                <div class="place-item mb-3 flex-fill">
                                                                    <div class="place-img">
                                                                        <div class="slide-images">
                                                                            <a href="#" 
                                                                            data-bs-toggle="modal" 
                                                                            data-bs-target="#accommodationModal"
                                                                            data-name="{{ acc.name }}"
                                                                            data-type="{{ acc.get_type_display }}"
                                                                            data-location="{{ acc.location }}"
                                                                            data-address="{{ acc.address }}"
                                                                            data-phone="{{ acc.phone }}"
                                                                            data-email="{{ acc.email }}"
                                                                            data-website="{{ acc.website }}"
                                                                            data-rating="{{ acc.rating }}"
                                                                            data-price="{{ acc.price_per_night }}"
                                                                            data-image="{{ acc.image.url }}"
                                                                            data-images="{% for img in acc.images.all %}{{ img.image.url }},{% endfor %}">
                                                                                <img src="{{ acc.image.url }}" class="img-fluid w-100 rounded" style="height: 160px; object-fit: cover;" alt="{{ acc.name }}">
                                                                            </a>
                                                                        </div>
                                                                    </div>
                                                                    <div class="place-content pt-2">
                                                                        <h6 class="mb-1 text-truncate" style="font-size: 15px;">
                                                                            <a href="#" 
                                                                            data-bs-toggle="modal" 
                                                                            data-bs-target="#accommodationModal"
                                                                            data-name="{{ acc.name }}"
                                                                            data-type="{{ acc.get_type_display }}"
                                                                            data-location="{{ acc.location }}"
                                                                            data-address="{{ acc.address }}"
                                                                            data-phone="{{ acc.phone }}"
                                                                            data-email="{{ acc.email }}"
                                                                            data-website="{{ acc.website }}"
                                                                            data-rating="{{ acc.rating }}"
                                                                            data-price="{{ acc.price_per_night }}"
                                                                            data-image="{{ acc.image.url }}"
                                                                            data-images="{% for img in acc.images.all %}{{ img.image.url }},{% endfor %}"
                                                                            ><span style="color: goldenrod;">{{ acc.name }}</span> | {{ acc.location }}</a>
                                                                        </h6>
                                                                        <div class="border-top pt-2 mb-2">
                                                                            <h6 class="d-flex align-items-center">
                                                                                Rating:
                                                                                {% if acc.rating == 1 %}
                                                                                    <i class="isax isax-star-1 text-warning ms-2 me-1"></i>
                                                                                {% elif acc.rating == 2 %}
                                                                                    <i class="isax isax-star-1 text-warning ms-2 me-1"></i>
                                                                                    <i class="isax isax-star-1 text-warning me-1"></i>
                                                                                {% elif acc.rating == 3 %}
                                                                                    <i class="isax isax-star-1 text-warning ms-2 me-1"></i>
                                                                                    <i class="isax isax-star-1 text-warning me-1"></i>
                                                                                    <i class="isax isax-star-1 text-warning me-1"></i>
                                                                                {% elif acc.rating == 4 %}
                                                                                    <i class="isax isax-star-1 text-warning ms-2 me-1"></i>
                                                                                    <i class="isax isax-star-1 text-warning me-1"></i>
                                                                                    <i class="isax isax-star-1 text-warning me-1"></i>
                                                                                    <i class="isax isax-star-1 text-warning me-1"></i>
                                                                                {% elif acc.rating == 5 %}
                                                                                    <i class="isax isax-star-1 text-warning ms-2 me-1"></i>
                                                                                    <i class="isax isax-star-1 text-warning me-1"></i>
                                                                                    <i class="isax isax-star-1 text-warning me-1"></i>
                                                                                    <i class="isax isax-star-1 text-warning me-1"></i>
                                                                                    <i class="isax isax-star-1 text-warning me-1"></i>
                                                                                {% else %}
                                                                                    <span class="text-muted ms-2">No rating</span>
                                                                                {% endif %}
                                                                            </h6>
                                                                        </div>
                                                                        <div class="d-flex align-items-center justify-content-between border-top pt-2">
                                                                            <h6 class="text-primary text-nowrap me-2 mb-0" style="font-size: 15px;">
                                                                                {{ acc.price_per_night }} <span class="fs-12 fw-normal text-default">/ Night</span>
                                                                            </h6>
                                                                            <div class="form-check mb-0">
                                                                                <input class="form-check-input" type="radio" 
                                                                                name="selected_accommodations" 
                                                                                id="acc{{ acc.id }}" 
                                                                                value="{{ acc.id }}"
                                                                                {% if acc.id == selected_accommodation.id %}checked{% endif %}
                                                                                style="transform: scale(1.5); margin-right: 5px;">
                                                                            <label class="form-check-label" for="acc{{ acc.id }}">
                                                                                Select
                                                                            </label>
                                                                        </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            {% endfor %}
                                                        </div>
                                                    </div>
                                                    <hr class="w-100 bg-black"/>
                                                    <h6 class="mb-4">Transports</h6>
                                                    <div class="owl-stage-outer">
                                                        <div class="owl-stage"
                                                            style="transform: translate3d(-330px, 0px, 0px); transition: 2s; width: 1650px;">
                                                            {% for trans in transport %}
                                                            <div class="owl-item" style="width: 220px; margin-right: 16px;">
                                                                <div class="place-item mb-3 flex-fill">
                                                                    <div class="place-img">
                                                                        <div class="slide-images">
                                                                            <a href="#" 
                                                                            data-bs-toggle="modal" 
                                                                            data-bs-target="#transportModal"
                                                                            data-type="{{ trans.get_type_display }}"
                                                                            data-company_name="{{ trans.company_name }}"
                                                                            data-description="{{ trans.description }}"
                                                                            data-vehicle_number="{{ trans.vehicle_number }}"
                                                                            data-seats_available="{{ trans.seats_available }}"
                                                                            data-departure_location="{{ trans.departure_location }}"
                                                                            data-arrival_location="{{ trans.arrival_location }}"
                                                                            data-departure_time="{{ trans.departure_time }}"
                                                                            data-arrival_time="{{ trans.arrival_time }}"
                                                                            data-price="{{ trans.price }}"
                                                                            data-image="{{ trans.image.url }}"
                                                                            data-images="{% for img in trans.images.all %}{{ img.image.url }},{% endfor %}">
                                                                                <img src="{{ trans.image.url }}" class="img-fluid w-100 rounded" style="height: 160px; object-fit: cover;" alt="{{ trans.name }}">
                                                                            </a>
                                                                        </div>
                                                                    </div>
                                                                    <div class="place-content pt-2">
                                                                        <h6 class="mb-1 text-truncate" style="font-size: 15px;">
                                                                            <a href="#" 
                                                                            data-bs-toggle="modal" 
                                                                            data-bs-target="#transportModal"
                                                                            data-type="{{ trans.get_type_display }}"
                                                                            data-company_name="{{ trans.company_name }}"
                                                                            data-description="{{ trans.description }}"
                                                                            data-vehicle_number="{{ trans.vehicle_number }}"
                                                                            data-seats_available="{{ trans.seats_available }}"
                                                                            data-departure_location="{{ trans.departure_location }}"
                                                                            data-arrival_location="{{ trans.arrival_location }}"
                                                                            data-departure_time="{{ trans.departure_time }}"
                                                                            data-arrival_time="{{ trans.arrival_time }}"
                                                                            data-price="{{ trans.price }}"
                                                                            data-image="{{ trans.image.url }}"
                                                                            data-images="{% for img in trans.images.all %}{{ img.image.url }},{% endfor %}">
                                                                            <span style="color: goldenrod;">{{ trans.get_type_display }}</span> | {{ trans.departure_location }}</a>
                                                                        </h6>
                                                                        <div class="border-top pt-2 mb-2">
                                                                            <h6 class="d-flex align-items-center">
                                                                                Company: 
                                                                                <span style="color: rgb(195, 135, 45);">{{ trans.company_name }}</span>
                                                                            </h6>
                                                                        </div>
                                                                        <div class="d-flex align-items-center justify-content-between border-top pt-2">
                                                                            <h6 class="text-primary text-nowrap me-2 mb-0" style="font-size: 15px;">
                                                                                {{ trans.price }} <span class="fs-12 fw-normal text-default">/ Night</span>
                                                                            </h6>
                                                                            <div class="form-check mb-0">
                                                                                    <input class="form-check-input" type="radio" 
                                                                                    name="selected_transport" 
                                                                                    id="acc{{ trans.id }}" 
                                                                                    value="{{ trans.id }}"
                                                                                    {% if trans.id == selected_transport.id %}checked{% endif %}
                                                                                    style="transform: scale(1.5); margin-right: 5px;">
                                                                                <label class="form-check-label" for="acc{{ trans.id }}">
                                                                                    Select
                                                                                </label>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            {% endfor %}
                                                        </div>
                                                    </div>
                                                </div>
                    
                                            <div class="text-end mt-4">
                                                <button type="submit" class="btn btn-success px-4">
                                                    Save Changes
                                                </button>
                                                <a href="" class="btn btn-secondary px-4">
                                                    Cancel
                                                </a>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    

                </div>
          
           
        </div>
       
    </div>
</section>

    <!-- Accommodation Modal With Their Scrpit -->
    <div class="modal fade" id="accommodationModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-xl">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="accModalTitle">Accommodation Details</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
              <div class="row gy-4">
                <div class="col-md-5">
                    <img id="accModalMainImage" src="" class="modal-main-image" alt="">
                </div>
                <div class="col-md-7">
                  <h5 id="accModalName"></h5>
                  <p><strong>Type:</strong> <span id="accModalType"></span></p>
                  <p><strong>Location:</strong> <span id="accModalLocation"></span></p>
                  <p><strong>Address:</strong> <span id="accModalAddress"></span></p>
                  <p><strong>Phone:</strong> <span id="accModalPhone"></span></p>
                  <p><strong>Email:</strong> <span id="accModalEmail"></span></p>
                  <p><strong>Website:</strong> <a href="#" id="accModalWebsite" target="_blank"></a></p>
                  <p><strong>Price / Night:</strong> $<span id="accModalPrice"></span></p>
                  <p><strong>Rating:</strong> <span id="accModalRatingStars"></span></p>
                </div>
                <div class="col-12">
                  <h6 class="mb-2">Gallery</h6>
                  <div class="d-flex flex-wrap gap-2" id="accModalGallery"></div>
                  
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <style>
          .modal-main-image {
            width: 100%;
            height: 320px; /* or whatever fits your layout */
            object-fit: cover;
            border-radius: 10px;
            }
      </style>
      <script>
        document.getElementById('accommodationModal').addEventListener('show.bs.modal', function (event) {
            const trigger = event.relatedTarget;
        
            // Get data attributes
            const name = trigger.getAttribute('data-name');
            const type = trigger.getAttribute('data-type');
            const location = trigger.getAttribute('data-location');
            const address = trigger.getAttribute('data-address');
            const phone = trigger.getAttribute('data-phone');
            const email = trigger.getAttribute('data-email');
            const website = trigger.getAttribute('data-website');
            const price = trigger.getAttribute('data-price');
            const rating = parseFloat(trigger.getAttribute('data-rating') || '0');
            const mainImage = trigger.getAttribute('data-image');
            const imageList = trigger.getAttribute('data-images') || '';
        
            // Fill fields
            document.getElementById('accModalTitle').textContent = name;
            document.getElementById('accModalName').textContent = name;
            document.getElementById('accModalType').textContent = type;
            document.getElementById('accModalLocation').textContent = location;
            document.getElementById('accModalAddress').textContent = address;
            document.getElementById('accModalPhone').textContent = phone || 'N/A';
            document.getElementById('accModalEmail').textContent = email || 'N/A';
            document.getElementById('accModalWebsite').textContent = website || 'N/A';
            document.getElementById('accModalWebsite').href = website || '#';
            document.getElementById('accModalPrice').textContent = price;
        
            // Main image
            document.getElementById('accModalMainImage').src = mainImage;
        
            // Rating stars
            const starsContainer = document.getElementById('accModalRatingStars');
            starsContainer.innerHTML = '';
            for (let i = 1; i <= 5; i++) {
                const star = document.createElement('i');
                star.className = 'isax isax-star-1 me-1';
                star.classList.add(i <= rating ? 'text-warning' : 'text-secondary');
                starsContainer.appendChild(star);
            }
        
            // Gallery images
            const gallery = document.getElementById('accModalGallery');
            gallery.innerHTML = '';
            imageList.split(',').forEach(item => {
            const [url, caption] = item.split('||'); // Split URL and caption if exists
            if (url.trim()) {
                const img = document.createElement('img');
                img.src = url.trim();
                img.className = 'rounded cursor-pointer';
                img.style = 'width: 80px; height: 60px; object-fit: cover;';
                img.setAttribute('data-full', url.trim());
                img.setAttribute('data-caption', caption || '');
                
                // Click: replace main image
                img.addEventListener('click', function () {
                    document.getElementById('accModalMainImage').src = this.getAttribute('data-full');

                    const captionText = this.getAttribute('data-caption');
                    const captionElem = document.getElementById('accModalMainCaption');
                    if (captionElem) captionElem.textContent = captionText || '';
                });

                gallery.appendChild(img);
            }
        });

        });
        </script>
    <!-- Transport Modal With Their Script -->
    <div class="modal fade" id="transportModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-xl">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="transModalTitle">Transport Details</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
              <div class="row gy-4">
                <div class="col-md-5">
                    <img id="transModalMainImage" src="" class="modal-main-image" alt="">
                </div>
                <div class="col-md-7">
                  <h5 id="transModalCompanyName"></h5>
                  <p><strong>Type:</strong> <span id="transModalType"></span></p>
                  <p><strong>Description:</strong> <span id="transModalDescription"></span></p>
                  <p><strong>Vehicle Number:</strong> <span id="transModalVehicleNumber"></span></p>
                  <p><strong>Seats Available:</strong> <span id="transModalSeatsAvailable"></span></p>
                  <p><strong>Departure Location:</strong> <span id="transModalDepartureLocation"></span></p>
                  <p><strong>Arrival Location:</strong> <span id="transModalArrivalLocation"></span></p>
                  <p><strong>Departure Time:</strong> <span id="transModalDepartureTime"></span></p>
                  <p><strong>Arrival Time:</strong> <span id="transModalArrivalTime"></span></p>
                  <p><strong>Price / Night:</strong> $<span id="transModalPrice"></span></p>
                </div>
                <div class="col-12">
                  <h6 class="mb-2">Gallery</h6>
                  <div class="d-flex flex-wrap gap-2" id="transModalGallery"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>      
      <script>
        document.getElementById('transportModal').addEventListener('show.bs.modal', function (event) {
          const trigger = event.relatedTarget;
        
          const type = trigger.getAttribute('data-type');
          const company_name = trigger.getAttribute('data-company_name');
          const description = trigger.getAttribute('data-description');
          const vehicle_number = trigger.getAttribute('data-vehicle_number');
          const seats_available = trigger.getAttribute('data-seats_available');
          const departure_location = trigger.getAttribute('data-departure_location');
          const arrival_location = trigger.getAttribute('data-arrival_location');
          const departure_time = trigger.getAttribute('data-departure_time');
          const arrival_time = trigger.getAttribute('data-arrival_time');
          const price = trigger.getAttribute('data-price');
          const mainImage = trigger.getAttribute('data-image');
          const imageList = trigger.getAttribute('data-images') || '';
        
          document.getElementById('transModalTitle').textContent = company_name;
          document.getElementById('transModalCompanyName').textContent = company_name;
          document.getElementById('transModalType').textContent = type;
          document.getElementById('transModalDescription').textContent = description;
          document.getElementById('transModalVehicleNumber').textContent = vehicle_number;
          document.getElementById('transModalSeatsAvailable').textContent = seats_available || 'N/A';
          document.getElementById('transModalDepartureLocation').textContent = departure_location || 'N/A';
          document.getElementById('transModalArrivalLocation').textContent = arrival_location || 'N/A';
          document.getElementById('transModalDepartureTime').textContent = departure_time;
          document.getElementById('transModalArrivalTime').textContent = arrival_time;
          document.getElementById('transModalPrice').textContent = price;
        
          document.getElementById('transModalMainImage').src = mainImage;
        
          const gallery = document.getElementById('transModalGallery');
          gallery.innerHTML = '';
          imageList.split(',').forEach(url => {
  if (url.trim()) {
    const img = document.createElement('img');
    img.src = url.trim();
    img.className = 'rounded';
    img.style = 'width: 80px; height: 60px; object-fit: cover; cursor: pointer;';
    
    // 🔁 Clicking gallery image updates main image
    img.addEventListener('click', () => {
      document.getElementById('transModalMainImage').src = img.src;
    });

    gallery.appendChild(img);
  }
});
        });
        </script>    

{% endblock %}